(()=>{"use strict";const e={mozaika:[{id:1,long:1,cost:1999,currency:"₽",type:"соло",frost:"* Без заморозки"},{id:2,long:6,cost:9900,currency:"₽",type:"соло",frost:"* Без заморозки"},{id:3,long:9,cost:13900,currency:"₽",type:"соло",frost:"* Без заморозки"},{id:4,long:12,cost:9900,currency:"₽",type:"дневная",frost:"* 1 месяц заморозки"},{id:5,long:12,cost:19900,currency:"₽",type:"соло",frost:"* 1 месяц заморозки"}],schelkovo:[{id:1,long:1,cost:2999,currency:"₽",type:"соло",frost:"* Без заморозки"},{id:2,long:6,cost:14990,currency:"₽",type:"соло",frost:"* Без заморозки"},{id:3,long:9,cost:21990,currency:"₽",type:"соло",frost:"* Без заморозки"},{id:4,long:12,cost:14990,currency:"₽",type:"дневная",frost:"* 1 месяц заморозки"},{id:5,long:12,cost:24990,currency:"₽",type:"соло",frost:"* 1 месяц заморозки"}]},t=function(e){document.querySelector(".popup"),console.log("form: ",e);var t=document.createElement("div");t.style.cssText="font-size: 2rem;",e.addEventListener("submit",(function(o){o.preventDefault();var c=new FormData(e);console.log("formData: ",c);var l={};c.forEach((function(e,t){l[t]=e,console.log("key: "+t+" val: "+e)})),l.name.length<2?alert("Имя должно содержать от 2 до 30 символов"):l.phone.length<7||l.phone.length>12?alert("Номер телефона должен содержать от 7 до 12 символов с учетом плюса!"):(t.textContent="Загрузка...",e.appendChild(t),n())}));var n=function(){var t=e.querySelector("input[name='name']"),n=e.querySelector("input[name='email']"),o=e.querySelector("input[name='message']"),c=e.querySelector("input[name='phone']");t.value="",n&&(n.value=""),c.value="",o&&(o.value="");var l=e.getElementsByTagName("div");e.removeChild(l)}},n=function(e){e.addEventListener("click",(function(t){var n=t.target,o=n.closest(".close-form"),c=n.closest(".form-content");(o||null==c)&&(e.style.display="none")}))};var o,c,l,r,i,s,a,d,u,y,f,m,v,p,g,E,h,k,q,L,S,b,x,C,w;r=document.querySelector(".top-menu"),window.addEventListener("scroll",(function(){pageYOffset>187&&r.clientWidth<768?(r.style.position="fixed",r.style.top="0"):(r.style.position="",r.style.top="")})),o=document.querySelector(".clubs-list"),c=o.querySelector("p"),l=o.querySelector("ul"),c.addEventListener("click",(function(e){l.style.display="block"})),document.addEventListener("click",(function(e){null!=e.target.closest(".clubs-list")||(l.style.display="none")}));for(var I=1;I<3;I++)t(document.getElementById("form"+I));(function(){var e,t=document.querySelector(".gallery-slider"),n=t.querySelectorAll(".slide"),o=t.querySelector(".slider-dots"),c=(document.createElement("span"),document.createElement("a"));c.classList.add("slider-arrow"),c.classList.add("prev");var l,r=0,i=function(e,t,n){e[t].classList.remove(n)},s=function(e,t,n){e[t].classList.add(n)},a=function(){i(n,r,"slide-active"),i(e,r,"slick-active"),r++,r%=n.length,s(n,r,"slide-active"),s(e,r,"slick-active")},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;l=setInterval(a,e)};t.addEventListener("click",(function(t){t.preventDefault();var o=t.target;o.matches("button")&&(i(n,r,"slide-active"),i(e,r,"slick-active"),o.matches("#arrow-right")?r++:o.matches("#arrow-left")?r--:o.closest("li")&&e.forEach((function(e,t){e===o.closest("li")&&(r=t)})),r>=n.length&&(r=0),r<0&&(r=n.length-1),s(n,r,"slide-active"),s(e,r,"slick-active"))})),t.addEventListener("mouseover",(function(e){e.target.matches(".dot")&&clearInterval(l)})),t.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&d()})),function(){for(var c=1;c<=n.length;c++){var l=document.createElement("li"),r=document.createElement("button");l.appendChild(r),l.classList.add("dot"),1===c&&l.classList.add("slick-active"),o.appendChild(l)}e=t.querySelectorAll(".dot")}(),d(1500)})(),E=document.getElementById("card_order"),h=E.querySelector(".time"),k=E.querySelectorAll(".club"),q=document.querySelector(".price-message").querySelector("input"),L=document.getElementById("price-total"),b=function(e){"ТЕЛО2020"==q.value?L.textContent=(.7*L.textContent).toFixed(2):L.textContent=w[0].cost},x=(S=function(e){return e.querySelector("input:checked")})(h),C=S(k[0]),w=e[C.value].filter((function(e){return e.long==x.value&&"соло"==e.type})),L.textContent=w[0].cost,b(),q.addEventListener("change",(function(){L.textContent=w[0].cost,b()})),E.addEventListener("click",(function(t){if(0==t.detail){var n=t.target;n.closest(".time")&&(x=S(h)),n.closest(".club")&&k.forEach((function(e){var t=S(e);null!=t&&(C=t)})),w=e[C.value].filter((function(e){return e.long==x.value&&"соло"==e.type})),L.textContent=w[0].cost,b()}})),p=document.querySelector(".callback-btn"),g=document.getElementById("callback_form"),p.addEventListener("click",(function(e){g.style.display="block"})),n(g),(v=document.getElementById("totop")).onclick=function(){window.scrollTo(pageXOffset,0)},window.addEventListener("scroll",(function(){v.hidden=pageYOffset<725})),m=document.querySelector(".popup-menu"),document.querySelector(".menu-button").addEventListener("click",(function(e){m.style.display="flex"})),m.addEventListener("click",(function(e){var t=e.target,n=t.closest(".close-menu-btn"),o=t.closest(".scroll");(n||o)&&(m.style.display="none")})),y=document.querySelector(".fixed-gift"),f=document.getElementById("gift"),y.addEventListener("click",(function(e){y.style.display="none",f.style.display="block"})),f.addEventListener("click",(function(e){f.style.display="none"})),d=document.querySelector(".open-popup"),u=document.getElementById("free_visit_form"),d.addEventListener("click",(function(e){u.style.display="block"})),n(u),i=document.querySelector(".main-slider").querySelectorAll(".slide"),s=0,a=function(){i[s].classList.remove("slide-active"),s++,s%=i.length,i[s].classList.add("slide-active")},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setInterval(a,e)}(3e3)})();