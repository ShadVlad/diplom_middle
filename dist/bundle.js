(()=>{"use strict";const e={mozaika:[{id:1,long:1,cost:1999,currency:"₽",type:"соло",frost:"* Без заморозки"},{id:2,long:6,cost:9900,currency:"₽",type:"соло",frost:"* Без заморозки"},{id:3,long:9,cost:13900,currency:"₽",type:"соло",frost:"* Без заморозки"},{id:4,long:12,cost:9900,currency:"₽",type:"дневная",frost:"* 1 месяц заморозки"},{id:5,long:12,cost:19900,currency:"₽",type:"соло",frost:"* 1 месяц заморозки"}],schelkovo:[{id:1,long:1,cost:2999,currency:"₽",type:"соло",frost:"* Без заморозки"},{id:2,long:6,cost:14990,currency:"₽",type:"соло",frost:"* Без заморозки"},{id:3,long:9,cost:21990,currency:"₽",type:"соло",frost:"* Без заморозки"},{id:4,long:12,cost:14990,currency:"₽",type:"дневная",frost:"* 1 месяц заморозки"},{id:5,long:12,cost:24990,currency:"₽",type:"соло",frost:"* 1 месяц заморозки"}]},t=function(e){var t=e.closest("div[id]"),n=e.querySelector("input[type='checkbox']"),l=e.parentNode;console.log("popUp: ",t);var o=document.createElement("div");o.style.cssText="font-size: 2rem;",o.style.color="white",console.log("sendBtn.checked: ",n.checked),e.addEventListener("submit",(function(a){a.preventDefault();var i=new FormData(e),s={};i.forEach((function(e,t){s[t]=e})),s.name.length<2?alert("Имя должно содержать от 2 до 30 символов"):s.phone.length<7||s.phone.length>12?alert("Номер телефона должен содержать от 7 до 12 символов с учетом плюса!"):n.checked?(o.textContent="Отправка...",l.appendChild(o),c(s).then((function(n){if(200!==n.status)throw new Error("status network not 200");o.textContent="Спасибо! Мы скоро с Вами свяжемся!",e.style.display="none",o.style.marginTop="30%",setTimeout((function(){r(),t.style.display="none"}),3e3)})).catch((function(){o.textContent="Что-то пошло не так...",e.style.display="none",o.style.marginTop="30%",setTimeout((function(){t.style.display="none"}),3e3)}))):alert("Вы должны дать согласие на обработку персональных данных!")}));var c=function(e){return fetch("../../server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},r=function(){var t=e.querySelector("input[name='name']"),n=e.querySelector("input[name='email']"),c=e.querySelector("input[name='message']"),r=e.querySelector("input[name='phone']"),a=e.querySelector("input[type='checkbox']");o.style.marginTop="0",e.style.display="block",t.value="",a.checked=!1,n&&(n.value=""),r.value="",c&&(c.value="");var i=l.getElementsByTagName("div");l.removeChild(i[0])}},n=function(e){e.addEventListener("click",(function(t){var n=t.target,l=n.closest(".close-form"),o=n.closest(".form-content");(l||null==o)&&(e.style.display="none")}))};var l,o,c,r,a,i,s,u,d,v,f,p,m,y,g,h,E,k,S,q,L,b,x,C,w;r=document.querySelector(".top-menu"),window.addEventListener("scroll",(function(){pageYOffset>187&&r.clientWidth<768?(r.style.position="fixed",r.style.top="0"):(r.style.position="",r.style.top="")})),l=document.querySelector(".clubs-list"),o=l.querySelector("p"),c=l.querySelector("ul"),o.addEventListener("click",(function(e){c.style.display="block"})),document.addEventListener("click",(function(e){null!=e.target.closest(".clubs-list")||(c.style.display="none")}));for(var A=1;A<3;A++){var I=document.getElementById("form"+A);console.log("form: ",I),t(I)}(function(){var e=document.querySelectorAll("form"),t=document.querySelectorAll("input[name='name']"),n=document.querySelectorAll("input[name='message']"),l=document.querySelectorAll("input[name='email']"),o=document.querySelectorAll("input[name='phone']");console.log("formInput: ",e),console.log("phoneInput: ",o);var c=function(){var e=event.target.value.replace(/\-{2,}/g,"-");(e.length<2||e.length>30)&&alert("Имя должно содержать от 2 до 30 символов"),e=e.split(/\s+/),event.target.value=e.map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},r=function(){var e=event.target.value.replace(/\-{2,}/g,"-");(e=e.split(/\s+/))[0]=e[0].charAt(0).toUpperCase()+e[0].slice(1),event.target.value=e.map((function(e){return e})).join(" ")},a=function(){var e=event.target.value.replace(/[^\d\+]/,"");(e.length<7||e.length>12)&&alert("Номер телефона должен содержать от 7 до 12 символов с учетом плюса!"),e=e.replace(/\-{2,}/g,"-"),event.target.value=e},i=function(){var e=event.target.value.replace(/[^A-Za-z\.\@\-\!\*\'\~]/g,"");e=(e=(e=e.replace(/\-{2,}/g,"-")).replace(/\-/,"")).replace(/\-$/,""),event.target.value=e};e.forEach((function(e){e.addEventListener("keyup",(function(e){if(e.target.matches("input[name='name']")){if(function(e){e.target.value=e.target.value.replace(/[^А-Яа-яЁё\s]+$/,"")}(e),e.target.value.length>30)return alert("Имя должно содержать от 2 до 30 символов"),void(e.target.value=e.target.value.slice(0,30))}else if(e.target.matches("input[name='message']"))!function(e){e.target.value=e.target.value.replace(/[^?!,.а-яА-ЯёЁ0-9]+$/,"")}(e);else if(e.target.matches("input[name='email']"))!function(e){e.target.value=e.target.value.replace(/[^A-Za-z\.\@\-\!\*\'\~]/,"")}(e);else if(e.target.matches("input[name='phone']")&&(function(e){e.target.value=e.target.value.replace(/[^\d\+]/,"")}(e),e.target.value.length>12))return alert("Номер телефона должен содержать от 7 до 12 символов с учетом плюса!"),void(e.target.value=e.target.value.slice(0,12))}))})),t.forEach((function(e){e.addEventListener("blur",(function(e){c()}))})),n.forEach((function(e){e.addEventListener("blur",(function(e){r()}))})),o.forEach((function(e){e.addEventListener("blur",(function(e){e.target.value,a()}))})),l.forEach((function(e){e.addEventListener("blur",(function(e){i()}))}))})(),function(){var e,t=document.querySelector(".gallery-slider"),n=t.querySelectorAll(".slide"),l=t.querySelector(".slider-dots"),o=(document.createElement("span"),document.createElement("a"));o.classList.add("slider-arrow"),o.classList.add("prev");var c,r=0,a=function(e,t,n){e[t].classList.remove(n)},i=function(e,t,n){e[t].classList.add(n)},s=function(){a(n,r,"slide-active"),a(e,r,"slick-active"),r++,r%=n.length,i(n,r,"slide-active"),i(e,r,"slick-active")},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;c=setInterval(s,e)};t.addEventListener("click",(function(t){t.preventDefault();var l=t.target;l.matches("button")&&(a(n,r,"slide-active"),a(e,r,"slick-active"),l.matches("#arrow-right")?r++:l.matches("#arrow-left")?r--:l.closest("li")&&e.forEach((function(e,t){e===l.closest("li")&&(r=t)})),r>=n.length&&(r=0),r<0&&(r=n.length-1),i(n,r,"slide-active"),i(e,r,"slick-active"))})),t.addEventListener("mouseover",(function(e){e.target.matches(".dot")&&clearInterval(c)})),t.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&u()})),function(){for(var o=1;o<=n.length;o++){var c=document.createElement("li"),r=document.createElement("button");c.appendChild(r),c.classList.add("dot"),1===o&&c.classList.add("slick-active"),l.appendChild(c)}e=t.querySelectorAll(".dot")}(),u(1500)}(),h=document.getElementById("card_order"),E=h.querySelector(".time"),k=h.querySelectorAll(".club"),S=document.querySelector(".price-message").querySelector("input"),q=document.getElementById("price-total"),b=function(e){"ТЕЛО2020"==S.value?q.textContent=(.7*q.textContent).toFixed(2):q.textContent=w[0].cost},x=(L=function(e){return e.querySelector("input:checked")})(E),C=L(k[0]),w=e[C.value].filter((function(e){return e.long==x.value&&"соло"==e.type})),q.textContent=w[0].cost,b(),S.addEventListener("change",(function(){q.textContent=w[0].cost,b()})),h.addEventListener("click",(function(t){if(0==t.detail){var n=t.target;n.closest(".time")&&(x=L(E)),n.closest(".club")&&k.forEach((function(e){var t=L(e);null!=t&&(C=t)})),w=e[C.value].filter((function(e){return e.long==x.value&&"соло"==e.type})),q.textContent=w[0].cost,b()}})),y=document.querySelector(".callback-btn"),g=document.getElementById("callback_form"),y.addEventListener("click",(function(e){g.style.display="block"})),n(g),(m=document.getElementById("totop")).onclick=function(){window.scrollTo(pageXOffset,0)},window.addEventListener("scroll",(function(){m.hidden=pageYOffset<725})),p=document.querySelector(".popup-menu"),document.querySelector(".menu-button").addEventListener("click",(function(e){p.style.display="flex"})),p.addEventListener("click",(function(e){var t=e.target,n=t.closest(".close-menu-btn"),l=t.closest(".scroll");(n||l)&&(p.style.display="none")})),v=document.querySelector(".fixed-gift"),f=document.getElementById("gift"),v.addEventListener("click",(function(e){v.style.display="none",f.style.display="block"})),f.addEventListener("click",(function(e){f.style.display="none"})),u=document.querySelector(".open-popup"),d=document.getElementById("free_visit_form"),u.addEventListener("click",(function(e){d.style.display="block"})),n(d),a=document.querySelector(".main-slider").querySelectorAll(".slide"),i=0,s=function(){a[i].classList.remove("slide-active"),i++,i%=a.length,a[i].classList.add("slide-active")},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setInterval(s,e)}(3e3)})();